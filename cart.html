<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintage Vault - Cart</title>
    <link rel="stylesheet" href="Styles.css">
    <link rel="stylesheet" href="UserH.css">
    <link rel="icon" href="images/favicon-32x32.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caudex:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <style>
       
     h2{
        text-align: left;
     }
        
    </style>
</head>

<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="index.html" target="_self"> 
                    <img src="images/Logo-removebg-preview.png" alt="Website Logo"> 
                </a>
             </div>
             <h1>Vintage Vault</h1>

            <ul>
                <li><a href="customerDashboard.html">Customer Dashboard</a></li>
                <li><a href="sallerDashboard.html">Seller Dashboard</a></li>
                <li><a href="clothing.html">Clothing</a></li>
                <li><a href="artworks.html">Artworks</a></li>
                <li><a href="furniture.html">Furniture</a></li>
                <li><a href="cart.html">Cart</a></li>
            </ul>
        </nav>
        <div class="Breadcrumb">
            <p><a href="index.html">Home</a> > <a href="customerDashboard.html">Customer Dashboard</a> > Cart</p>
        </div>
       
    </header>

    <main>
        
        <h2 style="text-align: left;">Cart Details</h2>

        <div id="CartIsEmpty">

        </div>
       
            <table id="cartTable">
                <thead>
                    <tr>
                        <th>Product Details</th>
                        <th>Quantity</th>
                        <th class="price">Price</th>
                        <th class="price">Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="cart-row">
                        <td class="productDetails">
                            <img src="images/w520_q80(1).avif" alt="Blazer">
                            <p>Name:<br><strong>cady blazer</strong> </p>
                        </td>
                        
                        <td>
                            <input class="quantity" type="number" name="Quan" min="1" value="1" data-price="1540"><br>
                            <a onclick="removeItem(this)">Remove</a>
                        </td>
                        <td> 1,540 SAR</td>
                        <td class="total-price"> 1,540 SAR</td>
                    </tr>
                    <tr class="cart-row">
                        <td class="productDetails">
                            <img src="images/_mg_0205_1.jpg" alt="Entry Table">
                            <p>Name: <br><strong>Entry Table</strong></p>
                        </td>
                       
                        <td>
                           <input type="number" class="quantity" name="Quan" min="1" value="1" data-price="1264"><br>
                            
                            <a onclick="removeItem(this)">Remove</a>
                        </td>
                        <td> 1,264 SAR</td>
                        <td class="total-price"> 1,264 SAR</td>
                    </tr>
                </tbody>
            </table>

        <div class="order-summary">
            <div id="summary">
                <h3 id = "orderSumH">Order Summary</h3>
                <p id = "orderSumNoITems">Items: 2</p>
                <p id = "Total">Total Cost: 2,804 SAR</p>
                
            </div>
            <div class="buttons">
                <a>
                    <button id="Checkout" onclick="checkout()" >
                        <strong>Checkout</strong>
                    </button>
                </a>
                <br>
                <button id="Clear" onclick="ClearCart()">Clear Cart</button>
            </div>
            
           
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Vintage Vault. All rights reserved.</p>
        <p>Contact us: <a href="mailto:VintageVaultsa@gmail.com" style="color:darkblue;">VintageVaultsa@gmail.com</a> | Phone: (123) 456-7890</p>
        <p>Follow us on: 
            <a href="https://www.instagram.com/VintageVaultStore" target="_blank">
                <img src="images/instagram.icon.png" alt="Instagram Icon" width="30" height="30"> Instagram
            </a> | 
            <a href="https://www.x.com/VintageVaultSa" target="_blank">
                <img src="images/X.icon.png" alt="X Icon" width="37" height="30"> X
            </a>
        </p>
    </footer>
    <script>
     function ClearCart() {
        let items = document.getElementsByTagName("table");
      
        for (let i = items.length - 1; i >= 0; i--) {
            items[i].remove();
        }
        document.getElementById("Checkout").remove();
        document.getElementById("Clear").remove();


        let orderSum = document.getElementById("summary");
        let h3 = orderSum.getElementsByTagName("h3");
        h3[0].remove();
        //h3[0].innerHTML = "Your Cart is Empty"
        let p = orderSum.getElementsByTagName("p");
        p[0].remove();
        document.getElementById("Total").remove();
        orderSum.remove();
        //orderSum.style.backgroundColor = rgba(0,0,0,0);
        cartEmp = document.getElementById("CartIsEmpty");
        cartEmp.innerHTML = "Your cart is empty";
        cartEmp.style.fontSize = "25px" ;
        cartEmp.style.color = "#634b2d";

    }
    // Function to update the totals
        function updateCartTotals() {
            let grandTotal = 0;

            // Get all rows in the cart table body
            const rows = document.getElementsByClassName('cart-row'); 

            for (let i = 0; i < rows.length; i++) {
                // Get the quantity input and unit price
                const quantityInput = rows[i].getElementsByClassName('quantity')[0];
                const unitPrice = parseFloat(quantityInput.getAttribute('data-price'));
                const quantity = parseInt(quantityInput.value, 10);

                // Calculate the total price for this row
                const totalPrice = unitPrice * quantity;
                rows[i].getElementsByClassName('total-price')[0].textContent = `${totalPrice.toLocaleString()} SAR`;

                // Add this row's total to the grand total
                grandTotal += totalPrice;
            }

            // Update the grand total on the page
            document.getElementById('Total').textContent = `Total Cost: ${grandTotal.toLocaleString()} SAR`;
        }


        // Get all quantity inputs
        const quantityInputs = document.getElementsByClassName('quantity');
        for (let i = 0; i < quantityInputs.length; i++) {
            quantityInputs[i].addEventListener('input', updateCartTotals);
        }

        // Initial calculation on page load
        updateCartTotals();

        function updateNoItems() {
            let noItems = 0;

            // Get all rows in the cart table body
            const rows = document.getElementsByClassName('cart-row'); 
            noItems = rows.length ;

            // Update the grand total on the page
            document.getElementById('orderSumNoITems').textContent = `Items: ${noItems.toLocaleString()}`;
        }
        updateNoItems();

        function removeItem(row){
            tableRow = row.closest('tr');
            if (tableRow) {
                tableRow.remove();
                updateCartTotals();
                updateNoItems() 
            }
        }

        function checkout(){
            feedback = "Thank You For Your Purchase";
            total = document.getElementById("Total").textContent;
            feedback += "\n" + total;
            alert(feedback);
            
            window.location.href = "Eval.html"; 
       
        }

    </script>
   
</body>

</html>
